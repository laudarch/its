TITLE DEUNA - poke at a DEUNA

.insrt kshack; ksdefs >

a=1
p=17

.insrt system; dedefs >

go:
	move p,[-100,,pdl]

	seto a,			;Enable user I/O
	.iotlsr a,

	movei a,%drset		;Reset DEUNA
	iowri a,%decr0
	pushj p,wait

	movei a,%dinte		;Enable interrupt
	iowri a,%decr0

	setz a,			;Clear PCSR2 and 3
	iowri a,%decr2
	iowri a,%decr3

	movei a,%dinte+%dgpcb	;Command Get PCB block
	iowri a,%decr0		;Expect an interrupt

	.logout 1,

wait:	iordi a,%decr0		;Wait for interrupt bit
	trnn a,%dintr
	 jrst wait
	popj p,

pdl:	block 100

end go
